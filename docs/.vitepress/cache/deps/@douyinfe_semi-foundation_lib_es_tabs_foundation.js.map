{
  "version": 3,
  "sources": ["../../../../node_modules/.pnpm/@douyinfe+semi-foundation@2.34.0/node_modules/@douyinfe/semi-foundation/lib/es/tabs/foundation.js"],
  "sourcesContent": ["import _noop from \"lodash/noop\";\nimport _get from \"lodash/get\";\nimport BaseFoundation from '../base/foundation';\n\nclass TabsFoundation extends BaseFoundation {\n  constructor(adapter) {\n    super(Object.assign({}, adapter));\n    this.destroy = _noop;\n\n    this.handlePrevent = event => {\n      event.stopPropagation();\n      event.preventDefault();\n    };\n\n    this.handleKeyDown = (event, itemKey, closable) => {\n      const {\n        preventScroll\n      } = this.getProps();\n      const tabs = [...event.target.parentNode.childNodes].filter(item => {\n        return _get(item, 'attributes.data-tabkey.value', '').includes('semiTab') && _get(item, 'attributes.aria-disabled.value', '') !== \"true\";\n      });\n\n      switch (event.key) {\n        case \"ArrowLeft\":\n        case \"ArrowRight\":\n        case \"ArrowUp\":\n        case \"ArrowDown\":\n          this.determineOrientation(event, tabs);\n          break;\n\n        case \"Backspace\":\n        case \"Delete\":\n          this.handleDeleteKeyDown(event, tabs, itemKey, closable);\n          break;\n\n        case \"Enter\":\n        case \" \":\n          this.handleTabClick(itemKey, event);\n          this.handlePrevent(event);\n          break;\n\n        case \"Home\":\n          tabs[0].focus({\n            preventScroll\n          }); // focus first tab\n\n          this.handlePrevent(event);\n          break;\n\n        case \"End\":\n          tabs[tabs.length - 1].focus({\n            preventScroll\n          }); // focus last tab\n\n          this.handlePrevent(event);\n          break;\n      }\n    };\n  }\n\n  init() {\n    this._adapter.collectPane();\n  }\n\n  _notifyChange(activeKey) {\n    const {\n      activeKey: stateActiveKey\n    } = this.getStates();\n\n    if (stateActiveKey !== activeKey) {\n      this._adapter.notifyChange(activeKey);\n    }\n  }\n\n  handleTabClick(activeKey, event) {\n    const isControlledComponent = this._isInProps('activeKey');\n\n    if (isControlledComponent) {\n      this._notifyChange(activeKey);\n    } else {\n      this._notifyChange(activeKey);\n\n      this.handleNewActiveKey(activeKey);\n    }\n\n    this._adapter.notifyTabClick(activeKey, event);\n  }\n\n  handleNewActiveKey(activeKey) {\n    const {\n      activeKey: stateActiveKey\n    } = this.getStates();\n\n    if (stateActiveKey !== activeKey) {\n      this._adapter.setNewActiveKey(activeKey);\n    }\n  }\n\n  getDefaultActiveKey() {\n    let activeKey;\n    const props = this.getProps();\n\n    if ('activeKey' in props) {\n      activeKey = props.activeKey;\n    } else if ('defaultActiveKey' in props) {\n      activeKey = props.defaultActiveKey;\n    } else {\n      activeKey = this._adapter.getDefaultActiveKeyFromChildren();\n    }\n\n    return activeKey;\n  }\n\n  handleTabListChange() {\n    this._adapter.collectPane();\n  }\n\n  handleTabPanesChange() {\n    this._adapter.collectPane();\n\n    this._adapter.collectActiveKey();\n  }\n\n  handleTabDelete(tabKey) {\n    this._adapter.notifyTabDelete(tabKey);\n  }\n\n  determineOrientation(event, tabs) {\n    const {\n      tabPosition\n    } = this.getProps();\n    const isVertical = tabPosition === 'left';\n\n    if (isVertical) {\n      if (event.key === \"ArrowUp\" || event.key === \"ArrowDown\") {\n        this.switchTabOnArrowPress(event, tabs);\n        this.handlePrevent(event);\n      }\n    } else {\n      if (event.key === \"ArrowLeft\" || event.key === \"ArrowRight\") {\n        this.switchTabOnArrowPress(event, tabs);\n        this.handlePrevent(event);\n      }\n    }\n  }\n\n  handleDeleteKeyDown(event, tabs, itemKey, closable) {\n    const {\n      preventScroll\n    } = this.getProps();\n\n    if (closable) {\n      this.handleTabDelete(itemKey);\n      const index = tabs.indexOf(event.target); // Move focus to next element after deletion\n      // If the element is the last removable tab, focus to its previous tab\n\n      if (tabs.length !== 1) {\n        tabs[index + 1 >= tabs.length ? index - 1 : index + 1].focus({\n          preventScroll\n        });\n      }\n    }\n  }\n\n  switchTabOnArrowPress(event, tabs) {\n    const {\n      preventScroll\n    } = this.getProps();\n    const index = tabs.indexOf(event.target);\n    const direction = {\n      \"ArrowLeft\": -1,\n      \"ArrowUp\": -1,\n      \"ArrowRight\": 1,\n      \"ArrowDown\": 1\n    };\n\n    if (direction[event.key]) {\n      if (index !== undefined) {\n        if (tabs[index + direction[event.key]]) {\n          tabs[index + direction[event.key]].focus({\n            preventScroll\n          });\n        } else if (event.key === \"ArrowLeft\" || event.key === \"ArrowUp\") {\n          tabs[tabs.length - 1].focus({\n            preventScroll\n          }); // focus last tab\n        } else if (event.key === \"ArrowRight\" || event.key == \"ArrowDown\") {\n          tabs[0].focus({\n            preventScroll\n          }); // focus first tab\n        }\n      }\n    }\n  }\n\n}\n\nexport default TabsFoundation;"],
  "mappings": "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",
  "names": ["_noop", "_get", "foundation_default"]
}
