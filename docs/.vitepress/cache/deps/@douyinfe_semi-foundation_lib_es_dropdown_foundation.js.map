{
  "version": 3,
  "sources": ["../../../../node_modules/.pnpm/@douyinfe+semi-foundation@2.34.0/node_modules/@douyinfe/semi-foundation/lib/es/dropdown/foundation.js"],
  "sourcesContent": ["import BaseFoundation from '../base/foundation';\nimport { handlePrevent, setFocusToFirstItem, setFocusToLastItem } from '../utils/a11y';\nexport default class DropdownFoundation extends BaseFoundation {\n  handleVisibleChange(visible) {\n    this._adapter.setPopVisible(visible);\n\n    this._adapter.notifyVisibleChange(visible);\n\n    const {\n      trigger\n    } = this.getProps();\n\n    if (visible && trigger === \"click\") {\n      const popupId = this._adapter.getPopupId();\n\n      this.setFocusToFirstMenuItem(popupId);\n    }\n  }\n\n  getMenuItemNodes(id) {\n    const menuWrapper = document.getElementById(id); // if has dropdown item, the item must wrapped by li\n\n    return menuWrapper ? Array.from(menuWrapper.getElementsByTagName('li')).filter(item => item.ariaDisabled === \"false\") : null;\n  }\n\n  setFocusToFirstMenuItem(id) {\n    const menuItemNodes = this.getMenuItemNodes(id);\n    menuItemNodes && setFocusToFirstItem(menuItemNodes);\n  }\n\n  setFocusToLastMenuItem(id) {\n    const menuItemNodes = this.getMenuItemNodes(id);\n    menuItemNodes && setFocusToLastItem(menuItemNodes);\n  }\n\n  handleKeyDown(event) {\n    var _a, _b;\n\n    const id = (_b = (_a = event.target) === null || _a === void 0 ? void 0 : _a.attributes['data-popupid']) === null || _b === void 0 ? void 0 : _b.value;\n\n    switch (event.key) {\n      case ' ':\n      case 'Enter':\n        event.target.click(); // user may use input to be the trigger and bind some key event on it, so do not stoppropagation\n        // handlePrevent(event);\n\n        break;\n\n      case 'ArrowDown':\n        this.setFocusToFirstMenuItem(id);\n        handlePrevent(event);\n        break;\n\n      case 'ArrowUp':\n        this.setFocusToLastMenuItem(id);\n        handlePrevent(event);\n        break;\n\n      default:\n        break;\n    }\n  }\n\n}"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;AAEA,IAAqB,qBAArB,cAAgD,mBAAe;AAAA,EAC7D,oBAAoB,SAAS;AAC3B,SAAK,SAAS,cAAc,OAAO;AAEnC,SAAK,SAAS,oBAAoB,OAAO;AAEzC,UAAM;AAAA,MACJ;AAAA,IACF,IAAI,KAAK,SAAS;AAElB,QAAI,WAAW,YAAY,SAAS;AAClC,YAAM,UAAU,KAAK,SAAS,WAAW;AAEzC,WAAK,wBAAwB,OAAO;AAAA,IACtC;AAAA,EACF;AAAA,EAEA,iBAAiB,IAAI;AACnB,UAAM,cAAc,SAAS,eAAe,EAAE;AAE9C,WAAO,cAAc,MAAM,KAAK,YAAY,qBAAqB,IAAI,CAAC,EAAE,OAAO,UAAQ,KAAK,iBAAiB,OAAO,IAAI;AAAA,EAC1H;AAAA,EAEA,wBAAwB,IAAI;AAC1B,UAAM,gBAAgB,KAAK,iBAAiB,EAAE;AAC9C,qBAAiB,oBAAoB,aAAa;AAAA,EACpD;AAAA,EAEA,uBAAuB,IAAI;AACzB,UAAM,gBAAgB,KAAK,iBAAiB,EAAE;AAC9C,qBAAiB,mBAAmB,aAAa;AAAA,EACnD;AAAA,EAEA,cAAc,OAAO;AACnB,QAAI,IAAI;AAER,UAAM,MAAM,MAAM,KAAK,MAAM,YAAY,QAAQ,OAAO,SAAS,SAAS,GAAG,WAAW,cAAc,OAAO,QAAQ,OAAO,SAAS,SAAS,GAAG;AAEjJ,YAAQ,MAAM,KAAK;AAAA,MACjB,KAAK;AAAA,MACL,KAAK;AACH,cAAM,OAAO,MAAM;AAGnB;AAAA,MAEF,KAAK;AACH,aAAK,wBAAwB,EAAE;AAC/B,sBAAc,KAAK;AACnB;AAAA,MAEF,KAAK;AACH,aAAK,uBAAuB,EAAE;AAC9B,sBAAc,KAAK;AACnB;AAAA,MAEF;AACE;AAAA,IACJ;AAAA,EACF;AAEF;",
  "names": []
}
