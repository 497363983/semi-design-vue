{
  "version": 3,
  "sources": ["../../../../node_modules/.pnpm/@douyinfe+semi-foundation@2.34.0/node_modules/@douyinfe/semi-foundation/lib/es/backtop/foundation.js"],
  "sourcesContent": ["import BaseFoundation from '../base/foundation';\nimport { Animation } from '@douyinfe/semi-animation';\nexport default class BackTopFoundation extends BaseFoundation {\n  constructor(adapter) {\n    super(Object.assign({}, adapter));\n\n    this.scrollTo = (targetNode, from, to) => {\n      const {\n        duration\n      } = this.getProps();\n      this.animation = new Animation({\n        from: {\n          scrollTop: from\n        },\n        to: {\n          scrollTop: to\n        }\n      }, {\n        duration,\n        easing: 'easeInOutCubic'\n      });\n      this.animation.on('frame', _ref => {\n        let {\n          scrollTop\n        } = _ref;\n\n        this._adapter.targetScrollToTop(targetNode, scrollTop);\n      });\n      this.animation.start();\n    };\n\n    this.handleScroll = () => {\n      const {\n        target,\n        visibilityHeight\n      } = this.getProps();\n      const targetNode = target();\n\n      const update = () => {\n        const scrollTop = this.getScroll(targetNode);\n\n        this._adapter.updateVisible(scrollTop > visibilityHeight);\n      };\n\n      requestAnimationFrame(update);\n    };\n  }\n\n  init() {\n    const {\n      target\n    } = this.getProps();\n    const targetNode = target();\n    targetNode.addEventListener('scroll', this.handleScroll);\n    this.handleScroll();\n  }\n\n  destroy() {\n    const {\n      target\n    } = this.getProps();\n    const targetNode = target();\n    targetNode && targetNode.removeEventListener('scroll', this.handleScroll);\n    this.animation && this.animation.destroy();\n  }\n\n  getScroll(target) {\n    if (this._adapter.isWindowUndefined()) {\n      return 0;\n    }\n\n    const prop = 'pageYOffset';\n    const method = 'scrollTop';\n\n    const isWindow = this._adapter.targetIsWindow(target);\n\n    const scroll = isWindow ? target[prop] : target[method];\n    return scroll;\n  }\n\n  setScrollTop(to) {\n    const {\n      target\n    } = this.getProps();\n    const targetNode = target();\n    const from = this.getScroll(targetNode);\n    this.scrollTo(targetNode, from, to);\n  }\n\n  onClick(e) {\n    this.setScrollTop(0);\n\n    this._adapter.notifyClick(e);\n  }\n\n}"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;AAEA,IAAqB,oBAArB,cAA+C,mBAAe;AAAA,EAC5D,YAAY,SAAS;AACnB,UAAM,OAAO,OAAO,CAAC,GAAG,OAAO,CAAC;AAEhC,SAAK,WAAW,CAAC,YAAY,MAAM,OAAO;AACxC,YAAM;AAAA,QACJ;AAAA,MACF,IAAI,KAAK,SAAS;AAClB,WAAK,YAAY,IAAI,UAAU;AAAA,QAC7B,MAAM;AAAA,UACJ,WAAW;AAAA,QACb;AAAA,QACA,IAAI;AAAA,UACF,WAAW;AAAA,QACb;AAAA,MACF,GAAG;AAAA,QACD;AAAA,QACA,QAAQ;AAAA,MACV,CAAC;AACD,WAAK,UAAU,GAAG,SAAS,UAAQ;AACjC,YAAI;AAAA,UACF;AAAA,QACF,IAAI;AAEJ,aAAK,SAAS,kBAAkB,YAAY,SAAS;AAAA,MACvD,CAAC;AACD,WAAK,UAAU,MAAM;AAAA,IACvB;AAEA,SAAK,eAAe,MAAM;AACxB,YAAM;AAAA,QACJ;AAAA,QACA;AAAA,MACF,IAAI,KAAK,SAAS;AAClB,YAAM,aAAa,OAAO;AAE1B,YAAM,SAAS,MAAM;AACnB,cAAM,YAAY,KAAK,UAAU,UAAU;AAE3C,aAAK,SAAS,cAAc,YAAY,gBAAgB;AAAA,MAC1D;AAEA,4BAAsB,MAAM;AAAA,IAC9B;AAAA,EACF;AAAA,EAEA,OAAO;AACL,UAAM;AAAA,MACJ;AAAA,IACF,IAAI,KAAK,SAAS;AAClB,UAAM,aAAa,OAAO;AAC1B,eAAW,iBAAiB,UAAU,KAAK,YAAY;AACvD,SAAK,aAAa;AAAA,EACpB;AAAA,EAEA,UAAU;AACR,UAAM;AAAA,MACJ;AAAA,IACF,IAAI,KAAK,SAAS;AAClB,UAAM,aAAa,OAAO;AAC1B,kBAAc,WAAW,oBAAoB,UAAU,KAAK,YAAY;AACxE,SAAK,aAAa,KAAK,UAAU,QAAQ;AAAA,EAC3C;AAAA,EAEA,UAAU,QAAQ;AAChB,QAAI,KAAK,SAAS,kBAAkB,GAAG;AACrC,aAAO;AAAA,IACT;AAEA,UAAM,OAAO;AACb,UAAM,SAAS;AAEf,UAAM,WAAW,KAAK,SAAS,eAAe,MAAM;AAEpD,UAAM,SAAS,WAAW,OAAO,IAAI,IAAI,OAAO,MAAM;AACtD,WAAO;AAAA,EACT;AAAA,EAEA,aAAa,IAAI;AACf,UAAM;AAAA,MACJ;AAAA,IACF,IAAI,KAAK,SAAS;AAClB,UAAM,aAAa,OAAO;AAC1B,UAAM,OAAO,KAAK,UAAU,UAAU;AACtC,SAAK,SAAS,YAAY,MAAM,EAAE;AAAA,EACpC;AAAA,EAEA,QAAQ,GAAG;AACT,SAAK,aAAa,CAAC;AAEnB,SAAK,SAAS,YAAY,CAAC;AAAA,EAC7B;AAEF;",
  "names": []
}
