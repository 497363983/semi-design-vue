{
  "version": 3,
  "sources": ["../../../../node_modules/.pnpm/@douyinfe+semi-foundation@2.34.0/node_modules/@douyinfe/semi-foundation/lib/es/carousel/foundation.js"],
  "sourcesContent": ["import _get from \"lodash/get\";\nimport _isObject from \"lodash/isObject\";\nimport BaseFoundation from '../base/foundation';\nimport { numbers } from './constants';\n\nclass CarouselFoundation extends BaseFoundation {\n  constructor(adapter) {\n    super(Object.assign({}, adapter));\n    this._interval = null;\n    this._forcePlay = false;\n  }\n\n  setForcePlay(forcePlay) {\n    this._forcePlay = forcePlay;\n  }\n\n  play(interval) {\n    if (this._interval) {\n      clearInterval(this._interval);\n    }\n\n    this._interval = setInterval(() => {\n      this.next();\n    }, interval);\n  }\n\n  stop() {\n    if (this._interval) {\n      clearInterval(this._interval);\n    }\n  }\n\n  goTo(activeIndex) {\n    const {\n      activeIndex: stateActiveIndex\n    } = this.getStates();\n    const targetIndex = this.getValidIndex(activeIndex);\n\n    this._adapter.setIsReverse(stateActiveIndex > targetIndex);\n\n    if (this.getIsControlledComponent()) {\n      this._notifyChange(targetIndex);\n    } else {\n      this._notifyChange(targetIndex);\n\n      this.handleNewActiveIndex(targetIndex);\n    }\n  }\n\n  next() {\n    this.stop();\n    const {\n      activeIndex: stateActiveIndex\n    } = this.getStates();\n    const targetIndex = this.getValidIndex(stateActiveIndex + 1);\n\n    this._adapter.setIsReverse(false);\n\n    if (this.getIsControlledComponent()) {\n      this._notifyChange(targetIndex);\n    } else {\n      this._notifyChange(targetIndex);\n\n      this.handleNewActiveIndex(targetIndex);\n    }\n\n    this.handleAutoPlay();\n  }\n\n  prev() {\n    this.stop();\n    const {\n      activeIndex: stateActiveIndex\n    } = this.getStates();\n    const targetIndex = this.getValidIndex(stateActiveIndex - 1);\n\n    this._adapter.setIsReverse(true);\n\n    if (this.getIsControlledComponent()) {\n      this._notifyChange(targetIndex);\n    } else {\n      this._notifyChange(targetIndex);\n\n      this.handleNewActiveIndex(targetIndex);\n    }\n\n    this.handleAutoPlay();\n  }\n\n  destroy() {\n    this._unregisterInterval();\n  }\n\n  _unregisterInterval() {\n    if (this._interval) {\n      clearInterval(this._interval);\n      this._interval = null;\n    }\n  }\n\n  _notifyChange(activeIndex) {\n    const {\n      activeIndex: stateActiveIndex,\n      isInit\n    } = this.getStates();\n\n    if (isInit) {\n      this._adapter.setIsInit(false);\n    }\n\n    if (stateActiveIndex !== activeIndex) {\n      this._adapter.setPreActiveIndex(stateActiveIndex);\n\n      this._adapter.notifyChange(activeIndex, stateActiveIndex);\n    }\n  }\n\n  getValidIndex(index) {\n    const {\n      children\n    } = this.getStates();\n    return (index + children.length) % children.length;\n  }\n\n  getSwitchingTime() {\n    const {\n      autoPlay,\n      speed\n    } = this.getProps();\n    const autoPlayType = typeof autoPlay;\n\n    if (autoPlayType === 'boolean') {\n      return numbers.DEFAULT_INTERVAL + speed;\n    }\n\n    if (_isObject(autoPlay)) {\n      return _get(autoPlay, 'interval', numbers.DEFAULT_INTERVAL) + speed;\n    }\n\n    return speed;\n  }\n\n  getIsControlledComponent() {\n    return this._isInProps('activeIndex');\n  }\n\n  handleAutoPlay() {\n    const {\n      autoPlay\n    } = this.getProps();\n    const autoPlayType = typeof autoPlay; // when user manually call the play function, force play\n\n    if (autoPlayType === 'boolean' && autoPlay || _isObject(autoPlay) || this._forcePlay) {\n      this.play(this.getSwitchingTime());\n    }\n  }\n\n  handleKeyDown(event) {\n    if (event.key === 'ArrowLeft') {\n      this.prev();\n    }\n\n    if (event.key === 'ArrowRight') {\n      this.next();\n    }\n  }\n\n  onIndicatorChange(activeIndex) {\n    const {\n      activeIndex: stateActiveIndex\n    } = this.getStates();\n\n    this._adapter.setIsReverse(stateActiveIndex > activeIndex);\n\n    this._notifyChange(activeIndex);\n\n    if (!this.getIsControlledComponent()) {\n      this.handleNewActiveIndex(activeIndex);\n    }\n  }\n\n  handleNewActiveIndex(activeIndex) {\n    const {\n      activeIndex: stateActiveIndex\n    } = this.getStates();\n\n    if (stateActiveIndex !== activeIndex) {\n      this._adapter.setNewActiveIndex(activeIndex);\n    }\n  }\n\n  getDefaultActiveIndex() {\n    let activeIndex;\n    const props = this.getProps();\n\n    if ('activeIndex' in props) {\n      activeIndex = props.activeIndex;\n    } else if ('defaultActiveIndex' in props) {\n      activeIndex = props.defaultActiveIndex;\n    }\n\n    return activeIndex;\n  }\n\n}\n\nexport default CarouselFoundation;"],
  "mappings": "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",
  "names": ["_isObject", "_get", "foundation_default"]
}
