{
  "version": 3,
  "sources": ["../../../../node_modules/.pnpm/@douyinfe+semi-foundation@2.34.0/node_modules/@douyinfe/semi-foundation/lib/es/timePicker/ComboxFoundation.js"],
  "sourcesContent": ["import { strings } from './constants';\nimport BaseFoundation from '../base/foundation';\nimport { isValidDate } from '../datePicker/_utils/index';\nimport isNullOrUndefined from '../utils/isNullOrUndefined';\nconst HOUR = 1000 * 60 * 60;\nconst DAY = 24 * HOUR; // TODO: move to utils\n\nexport const formatOption = (option, disabledOptions) => {\n  let value = `${option}`;\n\n  if (option < 10) {\n    value = `0${option}`;\n  }\n\n  let disabled = false;\n\n  if (disabledOptions && disabledOptions.indexOf(option) >= 0) {\n    disabled = true;\n  }\n\n  return {\n    value,\n    disabled\n  };\n};\n\nfunction generateOptions(length, disabledOptions, hideDisabledOptions) {\n  let step = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n  const arr = [];\n\n  for (let value = 0; value < length; value += step) {\n    if (!disabledOptions || disabledOptions.indexOf(value) < 0 || !hideDisabledOptions) {\n      arr.push(value);\n    }\n  }\n\n  return arr;\n}\n\nclass ComboboxFoundation extends BaseFoundation {\n  constructor(adapter) {\n    super(Object.assign({}, adapter));\n  }\n\n  isAM() {\n    return this.getProp('isAM');\n  }\n\n  initData() {\n    const {\n      timeStampValue,\n      hourStep,\n      disabledMinutes,\n      disabledSeconds,\n      hideDisabledOptions,\n      minuteStep,\n      secondStep\n    } = this.getProps();\n    const format = this.getValidFormat();\n    const dateTime = this.getDisplayDateFromTimeStamp(timeStampValue);\n    const disabledHourOptions = this.disabledHours();\n    const disabledMinuteOptions = disabledMinutes(dateTime ? dateTime.getHours() : null);\n    const disabledSecondOptions = disabledSeconds(dateTime ? dateTime.getHours() : null, dateTime ? dateTime.getMinutes() : null);\n    const hourOptions = generateOptions(24, disabledHourOptions, hideDisabledOptions, hourStep);\n    const minuteOptions = generateOptions(60, disabledMinuteOptions, hideDisabledOptions, minuteStep);\n    const secondOptions = generateOptions(60, disabledSecondOptions, hideDisabledOptions, secondStep);\n    return {\n      showHour: Boolean(format.match(/HH|hh|H|h/g)),\n      showMinute: Boolean(format.match(/mm/g)),\n      showSecond: Boolean(format.match(/ss/g)),\n      hourOptions,\n      minuteOptions,\n      secondOptions\n    };\n  }\n\n  getPosition() {\n    const position = this.getProp('position');\n    const type = this.getProp('type') || strings.DEFAULT_TYPE;\n    return position || strings.DEFAULT_POSITION[type];\n  }\n\n  getDefaultFormatIfNeed() {\n    if (this._isInProps('format')) {\n      return this.getProp('format');\n    } else if (this.getProp('use12Hours')) {\n      return strings.DEFAULT_FORMAT_A;\n    } else {\n      return strings.DEFAULT_FORMAT;\n    }\n  }\n\n  disabledHours() {\n    const {\n      use12Hours,\n      disabledHours\n    } = this.getProps();\n    let disabledOptions = disabledHours && disabledHours();\n\n    if (use12Hours && Array.isArray(disabledOptions)) {\n      if (this.isAM()) {\n        disabledOptions = disabledOptions.filter(h => h < 12).map(h => h === 0 ? 12 : h);\n      } else {\n        disabledOptions = disabledOptions.map(h => h === 12 ? 12 : h - 12);\n      }\n    }\n\n    return disabledOptions;\n  }\n\n  getValidFormat(format) {\n    let _format = isNullOrUndefined(format) ? this.getProp('format') : format;\n\n    _format = this.getDefaultFormatIfNeed();\n    _format = typeof _format === 'string' ? _format : strings.DEFAULT_FORMAT; // if (use12Hours) {\n    //     format = format.replace(/H/g, 'h');\n    //     if (!/(\\s+)a/i.test(format)) {\n    //         format += ' a';\n    //     } else {\n    //         format = format.replace(/(\\s+)A/i, '$1a');\n    //     }\n    // }\n\n    return _format;\n  }\n  /**\n   * from 13-bit timestamp  -> get display date\n   * by combobox use\n   */\n\n\n  getDisplayDateFromTimeStamp(timeStamp) {\n    let date;\n\n    if (timeStamp) {\n      date = new Date(timeStamp);\n    }\n\n    if (!timeStamp || !isValidDate(date)) {\n      return this.createDateDefault();\n    }\n\n    return date;\n  }\n  /**\n   * create a date at 00:00:00\n   */\n\n\n  createDateDefault() {\n    return new Date(parseInt(String(Date.now() / DAY), 10) * DAY - 8 * HOUR);\n  }\n\n}\n\nexport default ComboboxFoundation;"],
  "mappings": "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",
  "names": []
}
