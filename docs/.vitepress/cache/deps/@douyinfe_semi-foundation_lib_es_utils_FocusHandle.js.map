{
  "version": 3,
  "sources": ["../../../../node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/without.js", "../../../../node_modules/.pnpm/@douyinfe+semi-foundation@2.34.0/node_modules/@douyinfe/semi-foundation/lib/es/utils/FocusHandle.js"],
  "sourcesContent": ["var baseDifference = require('./_baseDifference'),\n    baseRest = require('./_baseRest'),\n    isArrayLikeObject = require('./isArrayLikeObject');\n\n/**\n * Creates an array excluding all given values using\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * **Note:** Unlike `_.pull`, this method returns a new array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {...*} [values] The values to exclude.\n * @returns {Array} Returns the new array of filtered values.\n * @see _.difference, _.xor\n * @example\n *\n * _.without([2, 1, 2, 3], 1, 2);\n * // => [3]\n */\nvar without = baseRest(function(array, values) {\n  return isArrayLikeObject(array)\n    ? baseDifference(array, values)\n    : [];\n});\n\nmodule.exports = without;\n", "import _without from \"lodash/without\";\nimport { isHTMLElement } from \"./dom\";\n\n/*\n* Usage:\n*   // Eg1: Pass a dom as the tab tarp container.\n*  const handle = new FocusTrapHandle(container, { enable: true });\n*\n*   // Eg2: The focus redirect listener will be triggered when user pressed tab whiling last focusable dom is focusing in trap dom, return false to cancel redirect and use the browser normal tab focus index.\n*   handle.addFocusRedirectListener((e)=>{\n*       return true; // return false to prevent redirect on target DOM;\n*   });\n*\n*   // Eg3: Set it to false in order to disable tab tarp at any moment;\n*   handle.enable = true;\n*\n*   // Eg4: Destroy instance when component is unmounting for saving resource;\n*   handle.destroy();\n*\n* */\nclass FocusTrapHandle {\n  constructor(container, options) {\n    var _a;\n\n    this.addFocusRedirectListener = listener => {\n      this.focusRedirectListenerList.push(listener);\n      return () => this.removeFocusRedirectListener(listener);\n    };\n\n    this.removeFocusRedirectListener = listener => {\n      this.focusRedirectListenerList = _without(this.focusRedirectListenerList, listener);\n    };\n\n    this.destroy = () => {\n      var _a;\n\n      (_a = this.container) === null || _a === void 0 ? void 0 : _a.removeEventListener('keydown', this.onKeyPress);\n    }; // ---- private func ----\n\n\n    this.shouldFocusRedirect = element => {\n      if (!this.enable) {\n        return false;\n      }\n\n      for (const listener of this.focusRedirectListenerList) {\n        const should = listener(element);\n\n        if (!should) {\n          return false;\n        }\n      }\n\n      return true;\n    };\n\n    this.focusElement = (element, event) => {\n      const {\n        preventScroll\n      } = this.options;\n      element === null || element === void 0 ? void 0 : element.focus({\n        preventScroll\n      });\n      event.preventDefault(); // prevent browser default tab move behavior\n    };\n\n    this.onKeyPress = event => {\n      if (event && event.key === 'Tab') {\n        const focusableElements = FocusTrapHandle.getFocusableElements(this.container);\n        const focusableNum = focusableElements.length;\n\n        if (focusableNum) {\n          // Shift + Tab will move focus backward\n          if (event.shiftKey) {\n            this.handleContainerShiftTabKeyDown(focusableElements, event);\n          } else {\n            this.handleContainerTabKeyDown(focusableElements, event);\n          }\n        }\n      }\n    };\n\n    this.handleContainerTabKeyDown = (focusableElements, event) => {\n      const activeElement = FocusTrapHandle.getActiveElement();\n      const isLastCurrentFocus = focusableElements[focusableElements.length - 1] === activeElement;\n      const redirectForcingElement = focusableElements[0];\n\n      if (isLastCurrentFocus && this.shouldFocusRedirect(redirectForcingElement)) {\n        this.focusElement(redirectForcingElement, event);\n      }\n    };\n\n    this.handleContainerShiftTabKeyDown = (focusableElements, event) => {\n      const activeElement = FocusTrapHandle.getActiveElement();\n      const isFirstCurrentFocus = focusableElements[0] === activeElement;\n      const redirectForcingElement = focusableElements[focusableElements.length - 1];\n\n      if (isFirstCurrentFocus && this.shouldFocusRedirect(redirectForcingElement)) {\n        this.focusElement(redirectForcingElement, event);\n      }\n    };\n\n    Object.freeze(options); // prevent user to change options after init;\n\n    this.container = container;\n    this.options = options;\n    this.enable = (_a = options === null || options === void 0 ? void 0 : options.enable) !== null && _a !== void 0 ? _a : true;\n\n    this.focusRedirectListenerList = (() => {\n      if (options === null || options === void 0 ? void 0 : options.onFocusRedirectListener) {\n        return Array.isArray(options.onFocusRedirectListener) ? [...options.onFocusRedirectListener] : [options.onFocusRedirectListener];\n      } else {\n        return [];\n      }\n    })();\n\n    this.container.addEventListener('keydown', this.onKeyPress);\n  }\n\n  get enable() {\n    return this._enable;\n  }\n\n  set enable(value) {\n    this._enable = value;\n  } // ---- static func ----\n\n\n  static getFocusableElements(node) {\n    if (!isHTMLElement(node)) {\n      return [];\n    }\n\n    const focusableSelectorsList = [\"input:not([disabled]):not([tabindex='-1'])\", \"textarea:not([disabled]):not([tabindex='-1'])\", \"button:not([disabled]):not([tabindex='-1'])\", \"a[href]:not([tabindex='-1'])\", \"select:not([disabled]):not([tabindex='-1'])\", \"area[href]:not([tabindex='-1'])\", \"iframe:not([tabindex='-1'])\", \"object:not([tabindex='-1'])\", \"*[tabindex]:not([tabindex='-1'])\", \"*[contenteditable]:not([tabindex='-1'])\"];\n    const focusableSelectorsStr = focusableSelectorsList.join(','); // we are not filtered elements which are invisible\n\n    return Array.from(node.querySelectorAll(focusableSelectorsStr));\n  }\n\n  static getActiveElement() {\n    return document ? document.activeElement : null;\n  }\n\n}\n\nexport default FocusTrapHandle;"],
  "mappings": "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",
  "names": ["_without", "_a"]
}
